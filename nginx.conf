server {
    listen 80;
    server_name localhost;

    # Serve the app at /math-map
    location /math-map/ {
        alias /usr/share/nginx/html/;
        index index.html;
        try_files $uri $uri/ /math-map/index.html;
        
        # Enable CORS for loading resources
        add_header Access-Control-Allow-Origin *;
        
        # Set correct content type for JSX files
        location ~ \.jsx$ {
            add_header Content-Type "text/babel" always;
            add_header Access-Control-Allow-Origin * always;
        }
    }

    # Exact match for /math-map without trailing slash
    location = /math-map {
        return 301 /math-map/;
    }
}
